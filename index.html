



<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Blue Builder Helper ‚Äî Backyard Blueprint</title>
<style>
  :root{
    --bg:#081028;
    --grid:#0d2e5f;
    --grid2:#0b2142;
    --line:#67e8f9;      /* cyan lines */
    --accent:#3b82f6;    /* blue orb base */
    --accent2:#60a5fa;
    --text:#e9f2ff;
    --muted:#b8c8ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font:16px/1.4 Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;
    color:var(--text); background:var(--bg); overflow:hidden;
  }

  /* ---- STAGE ---- */
  .app{position:relative; width:100%; height:100%;}
  /* faint photo underlay */
  .photo-underlay{
    position:absolute; inset:0; object-fit:cover; opacity:.14; filter:saturate(0) contrast(1.1) brightness(.9);
  }

  /* ---- ORB ---- */
  .orb{
    --size: 180px;
    position:absolute; left:50%; top:58%; transform:translate(-50%,-50%);
    width:var(--size); height:var(--size); border-radius:50%;
    background:
      radial-gradient(65% 65% at 35% 30%, #ffffffaa, transparent 45%),
      radial-gradient(100% 100% at 50% 50%, var(--accent2), var(--accent));
    box-shadow:
      0 10px 40px #3b82f666,
      inset 0 0 120px #60a5fa44;
    display:flex; align-items:center; justify-content:center;
    animation:bounce 2s ease-in-out infinite;
    z-index:8;
  }
  .orb.dock{
    animation: none;
    transition: transform .9s ease, top .9s ease, left .9s ease, width .6s ease, height .6s ease;
    top:70px; left:50%; transform:translate(-50%,0); width:120px; height:120px;
  }
  @keyframes bounce{
    0%,100%{ transform:translate(-50%,-50%) }
    50%{ transform:translate(-50%,-60%) }
  }

  /* face */
  .eye{
    width:38px; height:38px; background:#fff; border-radius:50%; position:absolute; overflow:hidden;
  }
  .eye .pupil{
    width:18px; height:18px; background:#000; border-radius:50%; position:absolute; top:10px; left:10px;
    transition: transform .05s linear;
  }
  .eyeL{ left:44px; top:56px }
  .eyeR{ right:44px; top:56px }
  .mouth{
    position:absolute; bottom:42px; left:50%; transform:translateX(-50%);
    width:56px; height:18px; border-radius:0 0 40px 40px / 0 0 18px 18px; background:#001a4d66;
    border:2px solid #001a4d99; border-top:none;
  }

  /* greeting + controls */
  .greet{
    position:absolute; top:calc(58% + 130px); left:50%; transform:translateX(-50%);
    color:var(--text); text-align:center; font-size:24px; opacity:0; transition:opacity .8s;
    z-index:7;
  }
  .greet.show{ opacity:1 }

  .controls{
    position:absolute; left:50%; top:calc(58% + 200px); transform:translateX(-50%);
    display:flex; gap:12px; flex-wrap:wrap; justify-content:center; z-index:7;
  }
  .btn{
    appearance:none; cursor:pointer; border:1px solid #2a4ea0; color:#e5eeff;
    background:#0d1a3a; padding:10px 14px; border-radius:10px; font-weight:600;
  }
  .btn.primary{ background:linear-gradient(180deg,#1d4ed8,#1e40af); border-color:#1e3a8a }

  /* ---- BLUEPRINT LAYER ---- */
  .blueprint{
    position:absolute; inset:0; z-index:4; display:none;
    background:
      linear-gradient(90deg,var(--grid2) 1px, transparent 1px) left top / 40px 40px repeat,
      linear-gradient(0deg ,var(--grid2) 1px, transparent 1px) left top / 40px 40px repeat,
      linear-gradient(90deg,var(--grid) 1px, transparent 1px) left top / 200px 200px repeat,
      linear-gradient(0deg ,var(--grid) 1px, transparent 1px) left top / 200px 200px repeat,
      linear-gradient(180deg, #071331, #091a3d);
  }
  svg{ width:100%; height:100% }

  /* falling animation for parts */
  .fall{
    opacity:0; transform:translateY(-180px); animation:fallIn .8s forwards;
  }
  @keyframes fallIn{
    to{ opacity:1; transform:translateY(0) }
  }

  /* side panel (optional forms) */
  .panel{
    position:absolute; right:14px; top:14px; z-index:9;
    width:360px; max-width:94vw;
    background:#0b1533cc; border:1px solid #1e2a4c; border-radius:12px; padding:12px;
    backdrop-filter: blur(6px);
    display:none;
  }
  .panel h3{ margin:0 0 8px 0; font-size:16px }
  .row{ display:flex; gap:8px; flex-wrap:wrap }
  label{ font-size:13px; color:var(--muted) }
  input,select{
    background:#0b1430; color:var(--text); border:1px solid #223a6b; border-radius:10px;
    padding:8px 10px; width:100%;
  }
  .check{ display:flex; align-items:center; gap:8px; color:#d7e4ff }
  .small{ font-size:12px; color:#a9bdff }

  /* toolbar buttons after blueprint */
  .toolbar{ position:absolute; left:14px; top:14px; z-index:9; display:none; gap:8px }
</style>
</head>
<body>
<div class="app" id="app">
  <img id="photo" class="photo-underlay" alt="" />

  <!-- ORB -->
  <div id="orb" class="orb" aria-live="polite">
    <div class="eye eyeL"><div class="pupil"></div></div>
    <div class="eye eyeR"><div class="pupil"></div></div>
    <div class="mouth"></div>
  </div>

  <div id="greet" class="greet">Hi! I‚Äôm your builder helper.<br/>Upload your backyard and I‚Äôll sketch a plan.</div>
  <div class="controls" id="controls">
    <label class="btn">
      <input id="file" type="file" accept="image/*" hidden />
      üîå Upload Backyard Photo
    </label>
    <button id="openPanel" class="btn">More Options</button>
    <button id="quick" class="btn primary">Generate Blueprint</button>
  </div>

  <!-- Optional settings form -->
  <div id="panel" class="panel">
    <h3>Backyard Settings</h3>
    <div class="row">
      <div style="flex:1">
        <label>Length (ft)</label>
        <input id="lenFt" type="number" min="10" max="200" value="40" />
      </div>
      <div style="flex:1">
        <label>Width (ft)</label>
        <input id="widFt" type="number" min="10" max="200" value="28" />
      </div>
    </div>
    <div class="row" style="margin-top:6px">
      <div style="flex:1">
        <label>Vibe</label>
        <select id="vibe">
          <option value="auto">Auto</option>
          <option value="zen">Zen</option>
          <option value="family">Family</option>
          <option value="entertain">Entertaining</option>
          <option value="modern">Modern</option>
        </select>
      </div>
      <div style="flex:1">
        <label>Budget</label>
        <select id="budget">
          <option value="auto">Auto</option>
          <option value="low">Low</option>
          <option value="medium" selected>Medium</option>
          <option value="high">High</option>
        </select>
      </div>
    </div>

    <div style="margin:8px 0 4px 0"><label>Features (auto or choose):</label></div>
    <div class="row">
      <label class="check"><input id="f_pool" type="checkbox"> Pool</label>
      <label class="check"><input id="f_zen" type="checkbox"> Zen garden</label>
      <label class="check"><input id="f_deck" type="checkbox" checked> Deck</label>
      <label class="check"><input id="f_perg" type="checkbox" checked> Pergola</label>
      <label class="check"><input id="f_path" type="checkbox" checked> Path</label>
      <label class="check"><input id="f_fire" type="checkbox"> Fire pit</label>
      <label class="check"><input id="f_beds" type="checkbox" checked> Planter beds</label>
    </div>
    <div class="row" style="margin-top:10px">
      <button id="generate" class="btn primary">Generate Blueprint</button>
      <button id="closePanel" class="btn">Close</button>
    </div>
    <div class="small" style="margin-top:6px">Tip: leave features unchecked to let the Orb decide.</div>
  </div>

  <!-- Blueprint canvas -->
  <div id="blueprint" class="blueprint">
    <svg id="bpSvg" viewBox="0 0 1200 800" preserveAspectRatio="xMidYMid slice"></svg>
  </div>

  <!-- Toolbar for after generation -->
  <div id="toolbar" class="toolbar">
    <button id="regen" class="btn">üîÅ Regenerate</button>
    
  </div>
</div>

<script>
/* ------------------------------
   Eye tracking & greeting
--------------------------------*/
const orb = document.getElementById('orb');
const pupils = document.querySelectorAll('.pupil');
const greet = document.getElementById('greet');
const photo = document.getElementById('photo');
const panel = document.getElementById('panel');
const blueprint = document.getElementById('blueprint');
const svg = document.getElementById('bpSvg');
const toolbar = document.getElementById('toolbar');
const controls = document.getElementById('controls');

setTimeout(()=>greet.classList.add('show'), 600);

document.addEventListener('mousemove',(e)=>{
  document.querySelectorAll('.eye').forEach(eye=>{
    const rect = eye.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    const angle = Math.atan2(e.clientY - cy, e.clientX - cx);
    const dx = Math.cos(angle)*7, dy = Math.sin(angle)*7;
    eye.querySelector('.pupil').style.transform = `translate(${dx}px, ${dy}px)`;
  });
});

/* ------------------------------
   Photo upload
--------------------------------*/
const fileInput = document.getElementById('file');
fileInput.addEventListener('change', ()=>{
  const f = fileInput.files?.[0];
  if(!f) return;
  photo.src = URL.createObjectURL(f);
  greet.innerHTML = "Nice! I'll sketch ideas on a blueprint.<br/>Click <b>Generate Blueprint</b>.";
});

/* ------------------------------
   UI wiring
--------------------------------*/
document.getElementById('openPanel').onclick = ()=> panel.style.display='block';
document.getElementById('closePanel').onclick = ()=> panel.style.display='none';
document.getElementById('quick').onclick = ()=> generate();
document.getElementById('generate').onclick = ()=> generate();
document.getElementById('regen').onclick = ()=> generate(true);
document.getElementById('export').onclick = exportSVG;

/* ------------------------------
   Blueprint generation heuristics
   - simple geometry on 1200x800 SVG
--------------------------------*/
const R = n => Math.random()*n;
const Ri = (a,b)=>Math.floor(a+Math.random()*(b-a+1));

function clearSVG(){
  while(svg.firstChild) svg.removeChild(svg.firstChild);
}

function add(el){ svg.appendChild(el); return el; }
function elem(tag, attrs={}, cls=''){
  const e = document.createElementNS('http://www.w3.org/2000/svg', tag);
  for(const k in attrs) e.setAttribute(k, attrs[k]);
  if(cls) e.setAttribute('class', cls);
  return e;
}
function fall(el, delay=0){
  el.style.opacity=0; el.style.transform='translateY(-180px)';
  el.style.transition='transform .6s ease, opacity .6s ease';
  setTimeout(()=>{
    el.style.opacity=1; el.style.transform='translateY(0)';
  }, delay);
}

/* Base styles */
const stroke = '#67e8f9';
const fillSoft = 'rgba(103,232,249,0.08)';
const hatch = 'rgba(103,232,249,0.18)';
const dot = 'rgba(103,232,249,0.9)';

/* Generate layout */
function generate(isRegen=false){
  // Dock orb to top on first run
  if(!isRegen){
    orb.classList.add('dock');
    greet.style.display = 'none';
    controls.style.display='none';
    panel.style.display='none';
  }

  blueprint.style.display='block';
  toolbar.style.display='flex';

  clearSVG();

  // Read options
  const L = parseFloat(document.getElementById('lenFt').value||40);
  const W = parseFloat(document.getElementById('widFt').value||28);
  const vibe = document.getElementById('vibe').value;
  const budget = document.getElementById('budget').value;

  const want = {
    pool: document.getElementById('f_pool').checked,
    zen:  document.getElementById('f_zen').checked,
    deck: document.getElementById('f_deck').checked,
    perg: document.getElementById('f_perg').checked,
    path: document.getElementById('f_path').checked,
    fire: document.getElementById('f_fire').checked,
    beds: document.getElementById('f_beds').checked
  };

  // Auto-pick features if none were forced
  const area = L*W;
  const small = area < 500, large = area > 900;
  const auto = Object.values(want).every(v=>!v);
  if(auto){
    want.deck = true;
    want.path = true;
    want.beds = true;
    if(!small && Math.random()<0.55) want.perg = true;
    if(!small && Math.random()<0.45) want.pool = true;
    if(Math.random()<0.35 || vibe==='zen') want.zen = true;
    if(Math.random()<0.25 && !want.pool) want.fire = true;
  }

  // Draw yard bounds (house edge at top)
  drawBounds();

  // Place features in zones: left, center, right; keep margins
  const margin = 60;
  const zones = [
    {x:margin, y:140, w:340, h:560},
    {x:430, y:140, w:340, h:560},
    {x:820, y:140, w:320, h:560},
  ];

  let delay = 0;

  // deck near "house edge" (top middle)
  if(want.deck){
    const dw = large? 340 : small? 220 : 280;
    const dh = large? 180 : small? 140 : 160;
    const x = (1200-dw)/2, y = 120; // attached to top
    drawDeck(x,y,dw,dh, delay+=80);
    if(want.perg){
      drawPergola(x+20,y+20,dw-40,dh-40, delay+=80);
    }
  }

  // main feature: pool or zen‚Äîoccupy a side zone
  const sideA = Math.random()<0.5 ? zones[0] : zones[2];
  const sideB = sideA===zones[0] ? zones[2] : zones[0];

  if(want.pool){
    const r = large? 150 : small? 90 : 120;
    drawPool(sideA.x+sideA.w/2, sideA.y+sideA.h/2, r*1.2, r, delay+=100);
  }
  if(want.zen){
    drawZenGarden(sideB.x+20, sideB.y+40, sideB.w-40, sideB.h-100, delay+=100);
  }

  // path from house (top center) to center zone bottom
  if(want.path){
    drawPath([{x:600,y:120},{x:600,y:300},{x:600,y:640}], delay+=60);
  }

  // fire pit in middle if available and no pool there
  if(want.fire){
    drawFirePit(600, 520, delay+=60);
  }

  // planter beds along edges
  if(want.beds){
    drawBeds(delay+=60);
  }

  // labels
  labelText("Estimated yard: "+Math.round(area)+" sq ft  ‚Ä¢  Vibe: "+(vibe==='auto'?'balanced':vibe)+"  ‚Ä¢  Budget: "+(budget==='auto'?'medium':budget), 20, 780);
}

/* ---- Drawing helpers ---- */
function drawBounds(){
  // outer rectangle
  const r = elem('rect', {x:20,y:20,width:1160,height:760, fill:'none', stroke:stroke, 'stroke-width':2});
  add(r); fall(r, 40);

  // house edge line at top
  const h = elem('line', {x1:20,y1:110,x2:1180,y2:110, stroke:stroke, 'stroke-width':2, 'stroke-dasharray':'8 8'});
  add(h); fall(h, 80);

  labelText('House', 30, 102);
  // dimensions
  tick(40,28); // just decorative
}

function tick(L,W){
  const dim = elem('text',{x:1040,y:50, fill:stroke, 'font-size':14}); dim.textContent = `~ ${L} √ó ${W} ft`;
  add(dim); fall(dim, 100);
}

function labelText(t,x,y){
  const tx = elem('text', {x, y, fill:stroke, 'font-size':14}); tx.textContent=t;
  add(tx);
}

function drawDeck(x,y,w,h,delay){
  const g = elem('g', {}, 'fall'); add(g); setTimeout(()=>g.classList.add('fall'), delay);
  const rect = elem('rect',{x,y,width:w,height:h, fill:fillSoft, stroke:stroke, 'stroke-width':2});
  g.appendChild(rect);
  // hatch
  for(let i=x+8;i<x+w;i+=14){
    const l = elem('line',{x1:i,y1:y+4,x2:i,y2:y+h-4, stroke:hatch, 'stroke-width':1});
    g.appendChild(l);
  }
  g.appendChild(textAt('DECK', x+w/2-16, y+h/2));
}

function drawPergola(x,y,w,h,delay){
  const g = elem('g', {}, 'fall'); add(g); setTimeout(()=>g.classList.add('fall'), delay);
  const rect = elem('rect',{x,y,width:w,height:h, fill:'none', stroke:stroke, 'stroke-width':2, 'stroke-dasharray':'6 6'});
  g.appendChild(rect);
  // slats
  for(let i=y+12;i<y+h;i+=18){
    const l = elem('line',{x1:x+6,y1:i,x2:x+w-6,y2:i, stroke:stroke, 'stroke-width':1, 'opacity':.7});
    g.appendChild(l);
  }
  // posts
  const posts = [
    {cx:x+14,cy:y+14},{cx:x+w-14,cy:y+14},
    {cx:x+14,cy:y+h-14},{cx:x+w-14,cy:y+h-14}
  ];
  posts.forEach(p=>g.appendChild(elem('circle',{cx:p.cx,cy:p.cy,r:5,fill:dot})));
  g.appendChild(textAt('PERGOLA', x+w/2-26, y+h/2));
}

function drawPool(cx,cy,rx,ry,delay){
  const g = elem('g', {}, 'fall'); add(g); setTimeout(()=>g.classList.add('fall'), delay);
  const e = elem('ellipse',{cx,cy,rx,ry, fill:'rgba(103,232,249,0.12)', stroke:stroke, 'stroke-width':3});
  g.appendChild(e);
  // water shimmer
  for(let i=0;i<5;i++){
    const rxi = rx - i*18, ryi = ry - i*10;
    if(rxi>0 && ryi>0){
      g.appendChild(elem('ellipse',{cx,cy,rx:rxi,ry:ryi, fill:'none', stroke:stroke, 'stroke-opacity':.45, 'stroke-dasharray':'2 10'}));
    }
  }
  g.appendChild(textAt('POOL', cx-18, cy));
}

function drawZenGarden(x,y,w,h,delay){
  const g = elem('g', {}, 'fall'); add(g); setTimeout(()=>g.classList.add('fall'), delay);
  const r = elem('rect',{x,y,width:w,height:h, rx:18, ry:18, fill:'rgba(103,232,249,0.07)', stroke:stroke, 'stroke-width':2});
  g.appendChild(r);
  // rake lines
  for(let i=y+14;i<y+h-10;i+=16){
    g.appendChild(elem('path',{d:`M ${x+10} ${i} Q ${x+w/2} ${i-6} ${x+w-10} ${i}`, fill:'none', stroke:stroke, 'stroke-opacity':.6}));
  }
  // stones
  for(let i=0;i<6;i++){
    const cx = x + 20 + R(w-40), cy = y + 20 + R(h-40);
    g.appendChild(elem('ellipse',{cx,cy,rx:Ri(8,18),ry:Ri(6,14), fill:dot, 'fill-opacity':.85}));
  }
  g.appendChild(textAt('ZEN GARDEN', x+w/2-40, y+h/2));
}

function drawPath(points,delay){
  const g = elem('g', {}, 'fall'); add(g); setTimeout(()=>g.classList.add('fall'), delay);
  // pavers as rounded rects along path
  for(let i=1;i<points.length;i++){
    const a = points[i-1], b = points[i];
    const steps = Math.max(6, Math.hypot(b.x-a.x, b.y-a.y)/50);
    for(let s=0;s<=steps;s++){
      const t = s/steps;
      const x = a.x + (b.x-a.x)*t;
      const y = a.y + (b.y-a.y)*t;
      const r = elem('rect',{x:x-16,y:y-10,width:32,height:20, rx:6, ry:6, fill:fillSoft, stroke:stroke, 'stroke-width':1});
      g.appendChild(r);
    }
  }
  g.appendChild(textAt('PATH', points[1].x-14, points[1].y+28));
}

function drawFirePit(cx,cy,delay){
  const g = elem('g', {}, 'fall'); add(g); setTimeout(()=>g.classList.add('fall'), delay);
  g.appendChild(elem('circle',{cx,cy,r:36, fill:'none', stroke:stroke, 'stroke-width':2}));
  g.appendChild(elem('circle',{cx,cy,r:18, fill:dot, 'fill-opacity':.18, stroke:stroke, 'stroke-dasharray':'4 6'}));
  g.appendChild(textAt('FIRE', cx-14, cy+4));
  // seating ring
  for(let a=0;a<360;a+=45){
    const x = cx + Math.cos(a*Math.PI/180)*70;
    const y = cy + Math.sin(a*Math.PI/180)*70;
    g.appendChild(elem('rect',{x:x-18,y:y-8,width:36,height:16, rx:6, ry:6, fill:fillSoft, stroke:stroke, 'stroke-width':1}));
  }
}

function drawBeds(delay){
  const g = elem('g', {}, 'fall'); add(g); setTimeout(()=>g.classList.add('fall'), delay);
  // along left & right edges
  const beds = [
    {x:26,y:140,w:30,h:560},
    {x:1144,y:140,w:30,h:560},
    {x:200,y:720,w:800,h:40}
  ];
  beds.forEach(b=>{
    g.appendChild(elem('rect',{x:b.x,y:b.y,width:b.w,height:b.h, fill:fillSoft, stroke:stroke, 'stroke-dasharray':'3 6'}));
    for(let i=b.x+6;i<b.x+b.w-6;i+=12){
      g.appendChild(elem('line',{x1:i,y1:b.y+6,x2:i,y2:b.y+b.h-6, stroke:hatch, 'stroke-width':1}));
    }
  });
  g.appendChild(textAt('PLANTERS', 560, 736));
}

function textAt(t,x,y){
  const tx = elem('text',{x,y, fill:stroke, 'font-size':12, 'text-anchor':'start'});
  tx.textContent=t; return tx;
}

/* ------------------------------
   Export SVG
--------------------------------*/
function exportSVG(){
  const blob = new Blob([svg.outerHTML], {type:'image/svg+xml'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'backyard_blueprint.svg';
  a.click();
}
</script>
</body>
</html>




